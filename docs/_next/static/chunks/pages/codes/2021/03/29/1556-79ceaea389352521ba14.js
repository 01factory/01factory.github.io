_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{TeTy:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/codes/2021/03/29/1556",function(){return n("eBfK")}])},eBfK:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return O}));var o=n("rePB"),p=n("Ff2n"),s=n("q1tI"),a=n("7ljp"),r=n("3wrV"),c=n("XLUx"),l=n("uIBO"),i=n.n(l),u=n("NYwN"),f=n.n(u),d=n("WC6i");n("N8yb"),n("vcl8"),n("X/SN"),n("vH+O");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b={};function O(t){var e=t.components,n=Object(p.a)(t,["components"]);return Object(a.a)("wrapper",y(y(y({},b),n),{},{components:e,mdxType:"MDXLayout"}),Object(a.a)("h1",null,"\u4e0a\u4f20\u6587\u4ef6"),Object(a.a)("h2",null,"\u7b2c\u4e09\u65b9\u7ec4\u4ef6"),Object(a.a)("p",null,"\u5bcc\u6587\u672c\u6846\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u975e\u5e38\u4f18\u79c0\u7684\u5bcc\u6587\u672c\u6846\u63a7\u4ef6",Object(a.a)("inlineCode",{parentName:"p"},"uppy"),"\u7684",Object(a.a)("a",y({parentName:"p"},{href:"https://www.npmjs.com/package/@uppy/react"}),Object(a.a)("inlineCode",{parentName:"a"},"react"),"\u5c01\u88c5"),"\u3002"),Object(a.a)("h2",null,"\u6587\u6863\u5730\u5740",Object(a.a)("a",y({parentName:"h2"},{href:"https://uppy.io/docs/"}),"https://uppy.io/docs/")),Object(a.a)("h2",null,"\u4e0b\u8f7d\u5b89\u88c5\u4f9d\u8d56"),Object(a.a)(r.a,{lan:"shell",code:"\nyarn add @uppy/react @uppy/core @uppy/xhr-upload\n",mdxType:"CodeEditor"}),Object(a.a)("h2",null,"\u5f15\u5165\u4f9d\u8d56\u9879\u53ca\u6837\u5f0f"),Object(a.a)(r.a,{lan:"ts",code:"\nimport Uppy from '@uppy/core';\nimport XHRUpload from '@uppy/xhr-upload';\n// import Webcam from '@uppy/webcam';\n// import ScreenCapture from '@uppy/screen-capture';\n// import ImageEditor from '@uppy/image-editor';\n// import OneDrive from '@uppy/onedrive';\n// import Instagram from '@uppy/instagram';\nimport { Dashboard, DashboardModal, ProgressBar, StatusBar, useUppy } from '@uppy/react';\nimport '@uppy/core/dist/style.css';\nimport '@uppy/dashboard/dist/style.css';\nimport '@uppy/progress-bar/dist/style.css';\nimport '@uppy/status-bar/dist/style.css';\n",mdxType:"CodeEditor"}),Object(a.a)("h2",null,"\u4e0a\u4f20\u5bf9\u8bdd\u6846\u56fa\u5b9a\u5728\u9875\u9762\u4e0a"),Object(a.a)(c.a,{scope:{XHRUpload:f.a,Dashboard:d.a,useUppy:d.c,Uppy:i.a},code:"\n()=>{\n\tconst s001 = '/api/upload';\n\tconst uppy = useUppy(() => {\n\t\tconst uppy = Uppy({\n\t\t\tallowMultipleUploads: true,\n\t\t\tautoProceed: true,\n\t\t\tdebug: true,\n\t\t\trestrictions: {\n\t\t\t\tmaxFileSize: 1000000,\n\t\t\t\tmaxNumberOfFiles: 3,\n\t\t\t\tminNumberOfFiles: 1,\n\t\t\t\t// allowedFileTypes: ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/wps-office.xlsx']\n\t\t\t\t// allowedFileTypes: ['application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/wps-office.docx']\n\t\t\t\tallowedFileTypes: ['image/*', 'video/*']\n\t\t\t\t// },\n\t\t\t\t// onBeforeUpload(files) {\n\t\t\t\t// \treturn files;\n\t\t\t\t// \tconst fs = {} as typeof files;\n\t\t\t\t// \tObject.keys(files).forEach((name) => {\n\t\t\t\t// \t\tconst file = files[name];\n\t\t\t\t// \t\tconsole.error('filetype', file.meta.type);\n\t\t\t\t// \t\tif (/(wps-office)|(vnd.ms-excel)|(openxmlformats-officedocument.spreadsheetml.sheet)/.test(file.meta.type)) {\n\t\t\t\t// \t\t}\n\t\t\t\t// \t\tfs[name] = file;\n\t\t\t\t// \t});\n\t\t\t\t// \treturn fs;\n\t\t\t}\n\t\t});\n\t\tuppy.use(XHRUpload, {\n\t\t\tfieldName: 'file',\n\t\t\tformData: true,\n\t\t\tmethod: 'PUT',\n\t\t\tendpoint: s001\n\t\t});\n\t\tuppy.on('complete', (result) => {\n\t\t\t// \u4ee5\u4e0b\u4ee3\u7801\u53ef\u5c06\u4e0a\u4f20\u7684\u5185\u5bb9\u53d8\u6210\u4e0b\u8f7d\u94fe\u63a5,\u653e\u5728\u9875\u9762\u4e0a.\n\t\t\t/* const [success] = result.successful;\n\t\t\tif (success) {\n\t\t\t\tconst content = success.response.body as { name: string; body: string; };\n\t\t\t\tconst blob = new Blob([content.body]);\n\t\t\t\tsetname(content.name);\n\t\t\t\tsetHref(URL.createObjectURL(blob));\n\t\t\t}*/\n\t\t});\n\t\treturn uppy;\n\t});\n\treturn <Dashboard uppy={uppy} />;\n}\n",mdxType:"Playground"}),Object(a.a)("h2",null,"\u6309\u94ae\u4e8b\u4ef6\u4e2d\u8c03\u7528\u4e0a\u4f20"),Object(a.a)(c.a,{scope:{XHRUpload:f.a,DashboardModal:d.b,useUppy:d.c,Uppy:i.a,useState:s.useState},code:"\n()=>{\n\tconst s001 = '/api/upload';\n\tconst [open, setopen] = useState(false);\n\tconst uppy = useUppy(() => {\n\t\tconst uppy = Uppy({\n\t\t\tallowMultipleUploads: true,\n\t\t\tautoProceed: true,\n\t\t\tdebug: true,\n\t\t\trestrictions: {\n\t\t\t\tmaxFileSize: 1000000,\n\t\t\t\tmaxNumberOfFiles: 3,\n\t\t\t\tminNumberOfFiles: 1,\n\t\t\t\t// allowedFileTypes: ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/wps-office.xlsx']\n\t\t\t\t// allowedFileTypes: ['application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/wps-office.docx']\n\t\t\t\tallowedFileTypes: ['image/*', 'video/*']\n\t\t\t\t// },\n\t\t\t\t// onBeforeUpload(files) {\n\t\t\t\t// \treturn files;\n\t\t\t\t// \tconst fs = {} as typeof files;\n\t\t\t\t// \tObject.keys(files).forEach((name) => {\n\t\t\t\t// \t\tconst file = files[name];\n\t\t\t\t// \t\tconsole.error('filetype', file.meta.type);\n\t\t\t\t// \t\tif (/(wps-office)|(vnd.ms-excel)|(openxmlformats-officedocument.spreadsheetml.sheet)/.test(file.meta.type)) {\n\t\t\t\t// \t\t}\n\t\t\t\t// \t\tfs[name] = file;\n\t\t\t\t// \t});\n\t\t\t\t// \treturn fs;\n\t\t\t}\n\t\t});\n\t\tuppy.use(XHRUpload, {\n\t\t\tfieldName: 'file',\n\t\t\tformData: true,\n\t\t\tmethod: 'PUT',\n\t\t\tendpoint: s001\n\t\t});\n\t\tuppy.on('complete', (result) => {\n\t\t\t// \u4ee5\u4e0b\u4ee3\u7801\u53ef\u5c06\u4e0a\u4f20\u7684\u5185\u5bb9\u53d8\u6210\u4e0b\u8f7d\u94fe\u63a5,\u653e\u5728\u9875\u9762\u4e0a.\n\t\t\t/* const [success] = result.successful;\n\t\t\tif (success) {\n\t\t\t\tconst content = success.response.body as { name: string; body: string; };\n\t\t\t\tconst blob = new Blob([content.body]);\n\t\t\t\tsetname(content.name);\n\t\t\t\tsetHref(URL.createObjectURL(blob));\n\t\t\t}*/\n\t\t});\n\t\treturn uppy;\n\t});\n\treturn <>\n\t<input type='button' value='upload...' onClick={() => {\n\t\tsetopen(true);\n\t}} />\n\t<DashboardModal uppy={uppy} open={open}  onRequestClose={() => {\n\t\tsetopen(false);\n\t}} />\n</>\n}\n",mdxType:"Playground"}))}O.isMDXComponent=!0}},[["TeTy",0,1,8,2,4,3,5,6,7,9,10]]]);