<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title class="jsx-2893578415">01factory|01微工厂</title><meta name="keywords" content="01factory,dfactory,01" class="jsx-2893578415"/><meta name="description" content="微工厂,从零到壹，数字之道" class="jsx-2893578415"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" class="jsx-2893578415"/><link rel="icon" type="image/x-icon" sizes="32x32" href="/favicon-32x32.ico" class="jsx-2893578415"/><link rel="icon" type="image/x-icon" sizes="16x16" href="/favicon-16x16.ico" class="jsx-2893578415"/><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/350e09057e231801b32f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/350e09057e231801b32f.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" as="script"/><link rel="preload" href="/_next/static/chunks/efe5b9f0e475b9630f05da880d915321f7ac39a1.65571f932be9853a08b3.js" as="script"/><link rel="preload" href="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.7f522d4c44240e733215.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-99016dfb960f134c798a.js" as="script"/><link rel="preload" href="/_next/static/chunks/edb17fefdb916118799d68ee0d51c15dd1b15581.9b340f9d21cfc83997ce.js" as="script"/><link rel="preload" href="/_next/static/chunks/7d6be8e52b15a1c2ee8b372d368ff9b522366852.73d35c9d2664c8d142ad.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7467674471030778f3eb.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/documents/2021/03/13-2-201807171015-870ac0e873cbed20bf1f.js" as="script"/></head><body><div id="__next"><div class="jsx-86683480 row "><div class="jsx-180329529 col s002"><div class="jsx-2893578415 outer"><header class="jsx-2893578415 inner"><a class="jsx-2893578415" href="/"><img height="150" width="217" src="/images/logo.png" class="jsx-2893578415 s001"/></a></header></div></div></div><div class="jsx-86683480 row "><div class="jsx-158700623 col "><a class="jsx-2893578415" href="/home_design"><h2 class="jsx-244854117  ">方案文档</h2></a></div><div class="jsx-158700623 col "><a class="jsx-2893578415" href="/"><h2 class="jsx-244854117  ">开发文档</h2></a></div><div class="jsx-158700623 col "><a class="jsx-2893578415" href="/home_ops"><h2 class="jsx-244854117  ">运维文档</h2></a></div></div><div class="jsx-788945023"><p>linux系统初始化</p><p>项目名称</p><p>运维培训</p><p>文件名称</p><p>linux系统初始化</p><p>编制部门</p><p>后台运维</p><p>作者</p><p>刘珂</p><p>当前版本</p><p>201807171015</p><p>受众范围</p><p>后台运维</p><p>文档控制</p><p><strong>修改记录</strong></p><p>日期</p><p>版本</p><p>修改类型</p><p>修改主要内容</p><p>作者</p><p>◆修改类型：A增加、B删除、C修改</p><p><strong>审阅人</strong></p><p>姓名</p><p>部门</p><p>职位</p><p>审阅签字</p><p>审阅时间</p><p><strong>存档</strong></p><p>存档时间</p><p>存放方式</p><p>存放地点、位置</p><p>备注</p><p>◆存放方式：A电子、B纸质</p><p>目录</p><p><a href="#_Toc1350490027">1 网络配置	1</a></p><p><a href="#_Toc783368690">1<!-- -->.<!-- -->1 配置IP	1</a></p><p><a href="#_Toc1102520059">1<!-- -->.<!-- -->1<!-- -->.<!-- -->1 静态	1</a></p><p><a href="#_Toc2044897763">1<!-- -->.<!-- -->1<!-- -->.<!-- -->2 动态	2</a></p><p><a href="#_Toc1967513926">1<!-- -->.<!-- -->1<!-- -->.<!-- -->3 桥接	2</a></p><p><a href="#_Toc1365180540">1<!-- -->.<!-- -->2 配置DNS	3</a></p><p><a href="#_Toc1540383426">1<!-- -->.<!-- -->3 配置主机名	3</a></p><p><a href="#_Toc304089172">1<!-- -->.<!-- -->4 启停网络服务	3</a></p><p><a href="#_Toc1303455736">2 ssh配置	3</a></p><p><a href="#_Toc35005211">2<!-- -->.<!-- -->1 生成公钥私钥对	3</a></p><p><a href="#_Toc521595368">2<!-- -->.<!-- -->2 配置文件	4</a></p><p><a href="#_Toc294702567">2<!-- -->.<!-- -->2<!-- -->.<!-- -->1 个人配置	4</a></p><p><a href="#_Toc1726956429">2<!-- -->.<!-- -->2<!-- -->.<!-- -->2 系统配置	4</a></p><p><a href="#_Toc336465782">3 查看系统信息	4</a></p><p><a href="#_Toc861021530">3<!-- -->.<!-- -->1 系统版本	5</a></p><p><a href="#_Toc278722862">3<!-- -->.<!-- -->2 内核	5</a></p><p><a href="#_Toc233665123">3<!-- -->.<!-- -->3 IP	5</a></p><p><a href="#_Toc2145174067">3<!-- -->.<!-- -->4 主机名	5</a></p><p><a href="#_Toc468703135">3<!-- -->.<!-- -->5 在线用户	5</a></p><p><a href="#_Toc1101513929">3<!-- -->.<!-- -->6 开机时间	5</a></p><p><a href="#_Toc1801979802">3<!-- -->.<!-- -->7 综合硬件信息	5</a></p><p><a href="#_Toc1315634022">3<!-- -->.<!-- -->8 CPU	5</a></p><p><a href="#_Toc635723058">3<!-- -->.<!-- -->9 内存	5</a></p><p><a href="#_Toc1369133069">3<!-- -->.<!-- -->10 硬盘	6</a></p><p><a href="#_Toc1125898167">3<!-- -->.<!-- -->11 环境变量	6</a></p><p><a href="#_Toc1059961393">3<!-- -->.<!-- -->12 防火墙状态	6</a></p><p><a href="#_Toc2089018456">3<!-- -->.<!-- -->13 selinux状态	6</a></p><p><a href="#_Toc628175011">3<!-- -->.<!-- -->14 运行的主要进程	6</a></p><ol><li><a href=""></a><a href=""></a>网络配置<ol><li><a href=""></a>配置IP<ol><li><a href=""></a>静态</li></ol></li></ol></li></ol><ul><li>CentOS</li></ul><p>/etc/sysconfig/network<!-- -->-<!-- -->scripts/ifcfg<!-- -->-<!-- -->xxx</p><p>如ifcfg<!-- -->-<!-- -->eno1</p><p>NAME=&quot;eno1&quot;</p><p>#<!-- --> device和HWADDR任意一种均可</p><p>#<!-- --> HWADDR=00:1e:67:a2:1d:5a</p><p>DEVICE=&quot;eno1&quot;</p><p>ONBOOT=&quot;yes&quot;</p><p>TYPE=&quot;Ethernet&quot;</p><p>BOOTPROTO=&quot;static&quot;</p><p>IPADDR=192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->197</p><p>PREFIX=24</p><p>GATEWAY=192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->1</p><p>DNS1=192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->190</p><p>DNS2=192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->253</p><p>DEFROUTE=yes</p><p><strong>NM<!-- -->_<!-- -->CONTROLLED=&quot;no&quot;</strong></p><ul><li>Debian</li></ul><p>/etc/network</p><p>如 /etc/network/interfaces</p><p>source /etc/network/interfaces<!-- -->.<!-- -->d/<!-- -->*</p><p>auto lo</p><p>iface lo inet loopback</p><p>auto enp2s0</p><p>iface enp2s0 inet static</p><p>address 172<!-- -->.<!-- -->16<!-- -->.<!-- -->15<!-- -->.<!-- -->6</p><p>netmask 255<!-- -->.<!-- -->255<!-- -->.<!-- -->255<!-- -->.<!-- -->0</p><p>gateway 172<!-- -->.<!-- -->16<!-- -->.<!-- -->15<!-- -->.<!-- -->1</p><p>hwaddress fc:aa:14:97:cc:e1</p><p>dns<!-- -->-<!-- -->nameserver 192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->190</p><p>dns<!-- -->-<!-- -->nameserver 192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->253</p><p>dns<!-- -->-<!-- -->nameserver 114<!-- -->.<!-- -->114<!-- -->.<!-- -->114<!-- -->.<!-- -->114</p><ul><li><ul><li><ol><li><a href=""></a>动态</li></ol></li></ul></li><li>CentOS</li></ul><p>NAME=em3</p><p>DEVICE=em3</p><p>ONBOOT=yes</p><p>TYPE=Ethernet</p><p>BOOTPROTO=dhcp</p><p><strong>NM<!-- -->_<!-- -->CONTROLLED=&quot;no&quot;</strong></p><ul><li>Debian</li></ul><p>auto enp2s0</p><p>iface enp2s0 inet dhcp</p><ul><li><ul><li><ol><li><a href=""></a>桥接</li></ol></li></ul></li><li>CentOS</li></ul><p>NAME=kvmbr0</p><p>DEVICE=kvmbr0</p><p>ONBOOT=yes</p><p>TYPE=Bridge</p><p>STP=yes</p><p>BOOTPROTO=&quot;static&quot;</p><p>IPADDR=172<!-- -->.<!-- -->16<!-- -->.<!-- -->15<!-- -->.<!-- -->9</p><p>PREFIX=24</p><p>GATEWAY=172<!-- -->.<!-- -->16<!-- -->.<!-- -->15<!-- -->.<!-- -->1</p><p>DNS1=192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->190</p><p>DNS2=192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->253</p><p>DNS3=114<!-- -->.<!-- -->114<!-- -->.<!-- -->114<!-- -->.<!-- -->114</p><p>DEFROUTE=yes</p><p><strong>NM<!-- -->_<!-- -->CONTROLLED=&quot;no&quot;</strong></p><ul><li>Debian</li></ul><p>auto enp2s0</p><p>iface enp2s0 inet manual</p><p>auto kvmbr0</p><p>iface kvmbr0 inet static</p><p>  bridge<!-- -->_<!-- -->ports enp2s0</p><pre><code>address 172\.16\.15\.6

netmask 255\.255\.255\.0

gateway 172\.16\.15\.1
</code></pre><ul><li><ol><li><a href=""></a>配置DNS</li></ol></li></ul><p>修改 /etc/resolv<!-- -->.<!-- -->conf</p><p>先检查该文件是否是符号链接，如果是的话，删除该链接，新建普通文件，写入dns配置：</p><p>nameserver 192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->190</p><p>nameserver 114<!-- -->.<!-- -->114<!-- -->.<!-- -->114<!-- -->.<!-- -->114</p><ul><li><ol><li><a href=""></a>配置主机名</li></ol></li></ul><p>修改 /etc/hostname</p><p>或 hostnamectl set<!-- -->-<!-- -->hostname xxx</p><ul><li><ol><li><a href=""></a>启停网络服务</li></ol></li></ul><ol><li>停止NetworkManager</li><li>使用 network<!-- -->(<!-- -->CentOS<!-- -->)<!-- -->/networking<!-- -->(<!-- -->Debian<!-- -->)<!-- --> 服务</li></ol><p>systemctl stop NetworkManager</p><p>systemctl disable NetworkManager</p><p>systemctl start network</p><p>systemctl enable network</p><p>systemctl enable networking</p><ol><li><a href=""></a>ssh配置<ol><li><a href=""></a>生成公钥私钥对</li></ol></li></ol><p>语法:</p><p>ssh<!-- -->-<!-- -->keygen <!-- -->[<!-- -->-<!-- -->t dsa | ecdsa | ed25519 | rsa | rsa1<!-- -->]<!-- --> <!-- -->[<!-- -->-<!-- -->N new<!-- -->_<!-- -->passphrase<!-- -->]<!-- --> <!-- -->[<!-- -->-<!-- -->C comment<!-- -->]<!-- --> <!-- -->[<!-- -->-<!-- -->f output<!-- -->_<!-- -->keyfile<!-- -->]</p><p>ssh<!-- -->-<!-- -->keygen</p><p>ssh<!-- -->-<!-- -->keygen <!-- -->-<!-- -->N xxxxxx</p><p>ssh<!-- -->-<!-- -->keygen <!-- -->-<!-- -->f ~<!-- -->.<!-- -->/ssh/github <!-- -->-<!-- -->N xxxxxx</p><p>ssh<!-- -->-<!-- -->keygen <!-- -->-<!-- -->t ecdsa</p><p>ssh<!-- -->-<!-- -->keygen <!-- -->-<!-- -->f ~<!-- -->.<!-- -->/ssh/github</p><p>参考：</p><p>man ssh<!-- -->-<!-- -->keygen</p><ul><li><ol><li><a href=""></a>配置文件<ol><li><a href=""></a>个人配置</li></ol></li></ol></li></ul><p><strong>~/<!-- -->.<!-- -->ssh/config</strong></p><p>在文件开头添加以下内容，可以保持连接在线时间20分钟。可根据实际使用情况如网络情况、任务操作状态调整参数值大小</p><p>Host    <!-- -->*</p><pre><code>    ServerAliveCountMax 40

    ServerAliveInterval 30
</code></pre><p>常用的主机可以在config设置别名，如</p><p>Host    201</p><pre><code>    User root

    Hostname 192\.168\.40\.201

    Port 22

    Identityfile ~/\.ssh/id\_rsa
</code></pre><p>连接方式即可从原来的 ssh root@192<!-- -->.<!-- -->168<!-- -->.<!-- -->40<!-- -->.<!-- -->201 改为 ssh 201。</p><p>sftp类似。</p><ul><li><ul><li><ol><li><a href=""></a>系统配置</li></ol></li></ul></li></ul><p><strong>/etc/ssh/ssh<!-- -->_<!-- -->config 文件，语法相同。</strong></p><ol><li><a href=""></a><a href=""></a>查看系统信息</li></ol><p>连接到一台服务器后首先了解以下信息。</p><ul><li><ol><li><a href=""></a>系统版本</li></ol></li></ul><p>cat /etc/os<!-- -->-<!-- -->release</p><ul><li><ol><li><a href=""></a>内核</li></ol></li></ul><p>uname <!-- -->-<!-- -->a</p><ul><li><ol><li><a href=""></a>IP</li></ol></li></ul><p>ip a</p><ul><li><ol><li><a href=""></a>主机名</li></ol></li></ul><p>cat /etc/hostname</p><ul><li><ol><li><a href=""></a>在线用户</li></ol></li></ul><p>w</p><p>who</p><ul><li><ol><li><a href=""></a>开机时间</li></ol></li></ul><p>w</p><ul><li><ol><li><a href=""></a>综合硬件信息</li></ol></li></ul><p>dmidecode</p><ul><li><ol><li><a href=""></a>CPU</li></ol></li></ul><p>cat /proc/cpuinfo</p><ul><li><ol><li><a href=""></a>内存</li></ol></li></ul><p>cat /proc/meminfo</p><p>free <!-- -->-<!-- -->h</p><ul><li><ol><li><a href=""></a>硬盘</li></ol></li></ul><p>fdisk <!-- -->-<!-- -->l</p><p>parted <!-- -->-<!-- -->-<!-- -->&gt; p</p><p>cat /etc/fstab</p><p>df <!-- -->-<!-- -->h</p><ul><li><ol><li><a href=""></a>环境变量</li></ol></li></ul><p>env</p><p>printenv xxx</p><ul><li><ol><li><a href=""></a>防火墙状态</li></ol></li></ul><p>systemctl status firewalld</p><p>iptables <!-- -->-<!-- -->L <!-- -->-<!-- -->n <!-- -->-<!-- -->-<!-- -->line<!-- -->-<!-- -->numbers</p><ul><li><ol><li><a href=""></a>selinux状态</li></ol></li></ul><p>getenforce</p><p>cat /etc/selinux/config</p><ul><li><ol><li><a href=""></a>运行的主要进程</li></ol></li></ul><p>ps <!-- -->-<!-- -->ef</p><p>ps aux</p></div><div class="jsx-1988653958 outer"><footer class="jsx-1988653958 inner"><a href="https://github.com/01factory/01factory.github.io/edit/main/src/pages/main.md" target="_blank" rel="noreferrer noopener" class="jsx-1988653958"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" class="jsx-1988653958 s001"><g class="jsx-1988653958"><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z" class="jsx-1988653958"></path></g></svg>Edit this page on Github</a><br class="jsx-1988653958"/><a href="https://gitee.com/dfactory01/dfactory01/edit/main/src/pages/main.md" target="_blank" rel="noreferrer noopener" class="jsx-1988653958"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" class="jsx-1988653958 s001"><g class="jsx-1988653958"><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z" class="jsx-1988653958"></path></g></svg>Edit this page on Gitee</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/documents/2021/03/13-2-201807171015","query":{},"buildId":"eNT340qFoCTFqokigekvk","runtimeConfig":{},"nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/chunks/polyfills-5caa60317e4d0196bd5f.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" async=""></script><script src="/_next/static/chunks/efe5b9f0e475b9630f05da880d915321f7ac39a1.65571f932be9853a08b3.js" async=""></script><script src="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.7f522d4c44240e733215.js" async=""></script><script src="/_next/static/chunks/main-99016dfb960f134c798a.js" async=""></script><script src="/_next/static/chunks/edb17fefdb916118799d68ee0d51c15dd1b15581.9b340f9d21cfc83997ce.js" async=""></script><script src="/_next/static/chunks/7d6be8e52b15a1c2ee8b372d368ff9b522366852.73d35c9d2664c8d142ad.js" async=""></script><script src="/_next/static/chunks/pages/_app-7467674471030778f3eb.js" async=""></script><script src="/_next/static/chunks/pages/documents/2021/03/13-2-201807171015-870ac0e873cbed20bf1f.js" async=""></script><script src="/_next/static/eNT340qFoCTFqokigekvk/_buildManifest.js" async=""></script><script src="/_next/static/eNT340qFoCTFqokigekvk/_ssgManifest.js" async=""></script></body></html>