# 操作系统Debian安装教程

<!-- TOC -->

- [1. Windows系统的解决办法](#1-windows系统的解决办法)
- [2. 下载Debian的安装镜像](#2-下载debian的安装镜像)
- [3. **数据备份**](#3-数据备份)
- [4. 单系统or双系统](#4-单系统or双系统)
- [5. 制作启动盘](#5-制作启动盘)
- [6. 使用U盘启动](#6-使用u盘启动)
- [7. 选择语言](#7-选择语言)
- [8. 选择区域](#8-选择区域)
- [9. 配置键盘](#9-配置键盘)
- [10. 加载安装程序](#10-加载安装程序)
- [11. 配置网络](#11-配置网络)
	- [11.1. 配置主机名](#111-配置主机名)
	- [11.2. 配置域](#112-配置域)
- [12. 配置用户名密码](#12-配置用户名密码)
	- [12.1. root用户](#121-root用户)
	- [12.2. 普通用户](#122-普通用户)
- [13. 设置时区](#13-设置时区)
- [14. 分区](#14-分区)
	- [14.1. 选择硬盘](#141-选择硬盘)
	- [14.2. 设置分区](#142-设置分区)
- [15. 扫描其它光盘](#15-扫描其它光盘)
- [16. 选择镜像](#16-选择镜像)
	- [16.1. 选择镜像国家](#161-选择镜像国家)
	- [16.2. 选择镜像站点](#162-选择镜像站点)
- [17. 设置代理服务器](#17-设置代理服务器)
- [18. 参与调研](#18-参与调研)
- [19. 安装系统](#19-安装系统)
	- [19.1. 选择加装桌面和服务](#191-选择加装桌面和服务)
	- [19.2. 选择显示管理器](#192-选择显示管理器)
	- [19.3. 安装](#193-安装)
- [20. 引导](#20-引导)
- [21. 完成安装](#21-完成安装)
- [22. 初始化配置](#22-初始化配置)
	- [22.1. 选择桌面](#221-选择桌面)
	- [22.2. 为用户添加sudo权限](#222-为用户添加sudo权限)
	- [22.3. 安装必要的软件](#223-安装必要的软件)
		- [22.3.1. 其它常用的软件](#2231-其它常用的软件)
	- [22.4. 设置时区](#224-设置时区)

<!-- /TOC -->

## 1. Windows系统的解决办法

如果是原有Windows操作系统，希望使用Linux的功能，除了可以[安装双系统外](https://linux.cn/article-11557-1.html)，还可以在windows系统中使用Linux的功能：

1. win7

	安装虚拟机，在虚拟机上安装Linux

1. win10

	[开启Linux子系统](https://sspai.com/post/43813)

## 2. 下载Debian的安装镜像

官方网站的下载速度被限，可以使用[中国科技大学开源镜像](https://mirrors.ustc.edu.cn/debian-cd/current/amd64/iso-cd/)进行下载，只下载`debian-x.x.x-amd64-netinst.iso`即可，当前最新版本号为10.8.0。

**注意：**

如果安装过程不能联网，可以下载debian-x.x.x-amd64-xfce-CD-1.iso试试，本人没有测试过，但从安装程序的名字看起来，这个版本应该是不需要联网的

## 3. **数据备份**

在进行系统安装之前，请务必备份好原电脑上的数据到第三方存储（硬盘或云盘）。

## 4. 单系统or双系统

建议安装单Linux系统，如果需要用到windows(比如需要进行微信小程序的开发)，可以安装windows虚拟机。

如果要安装双系统，请先使用磁盘工具将磁盘空出一个不小于20g的主分区。

## 5. 制作启动盘

使用U盘制作启动盘，`windows`上可以使用[大白菜](http://dbc.dqsspx.top/)之类的制作工具，`linux`上使用`dd`命令。

## 6. 使用U盘启动

不同的电脑会有不同的开机启动顺序的使用方法，大部分电脑还会提供在启动时按快捷键(比如f8)临时修改启动顺序的功能。

插上U盘，并选择使用U盘启动，会显示以下界面:

![2021-02-24-13-03-28.png](../images/debian/2021-02-24-13-03-28.png)

使用默认选择`Graphical install`使用带图形界面的安装，回车下一步

## 7. 选择语言

注意这里的选择语言并不是安装后系统的语言，只是安装过程中图形界面的语言，所以选哪个都行，只要你能看得懂就可以.我这里使用默认的选择英文。

![2021-02-24-13-04-08.png](../images/debian/2021-02-24-13-04-08.png)

## 8. 选择区域

这里因为应该选择中国上海，但我这里选择了美国，没关系，这些设置可以在系统安装后再修改。所以在这里并不用过分担心，只要安装过程能正常完成即可。

![2021-02-24-13-04-37.png](../images/debian/2021-02-24-13-04-37.png)

## 9. 配置键盘

使用默认的美式英语键盘，直接继续下一步(`continue/继续`)。如果你前面选择了中文，这里也对应选择中国的键盘映射即可.

![2021-02-24-13-04-41.png](../images/debian/2021-02-24-13-04-41.png)

## 10. 加载安装程序

看图示的英文描述应该是从CD加载组件，其实就是从我们制作好的U盘上把安装程序加载到电脑内存中。

![2021-02-24-13-04-45.png](../images/debian/2021-02-24-13-04-45.png)

过程中只需要耐心等待即可，这个过程比较快，可以点根烟。

![2021-02-24-13-04-47.png](../images/debian/2021-02-24-13-04-47.png)

## 11. 配置网络

自动配置网络，我们继续等待。如果配置网络不成功，可能需要手动配置ip网关dns。

![2021-02-24-13-05-08.png](../images/debian/2021-02-24-13-05-08.png)

### 11.1. 配置主机名

我这里不修改，使用默认。

![2021-02-24-13-05-33.png](../images/debian/2021-02-24-13-05-33.png)

### 11.2. 配置域

不需要配置，保持空即可，现在的网络条件下，直接在局域网共享的场合也越来越少,有太多的手段可以替代了。

![2021-02-24-13-05-37.png](../images/debian/2021-02-24-13-05-37.png)

## 12. 配置用户名密码

### 12.1. root用户

输两次密码，然后继续，一定要记住这个密码，实在不愿意记忆，可以考虑使用`123`。在Linux上，不允许使用空密码。

这里配置的密码的用户名为`root`.

![2021-02-24-13-05-42.png](../images/debian/2021-02-24-13-05-42.png)

### 12.2. 普通用户

配置完整用户名

![2021-02-24-13-07-15.png](../images/debian/2021-02-24-13-07-15.png)

配置用户名，这个用户名是我们用来登录的用户名，同时也是默认`/home/`下的名字，所以这个名字建议取地方便一些。

![2021-02-24-13-07-18.png](../images/debian/2021-02-24-13-07-18.png)

为这个用户设置密码

![2021-02-24-13-07-25.png](../images/debian/2021-02-24-13-07-25.png)

## 13. 设置时区

因为前面我选择的地区是美国，所以这里只能选择美国的时区。不过不用担心，这里随便选一个即可，我们可以在系统安装完之后再修改它。

![2021-02-24-13-07-38.png](../images/debian/2021-02-24-13-07-38.png)

## 14. 分区

这里对很多人来说不容易掌握，因为如果不小心进行了该操作，有可能会将原电脑上的资料全部删除。

### 14.1. 选择硬盘

以下几种方式都可以，为了简单，我这里就选择使用整个磁盘，如果是双系统或者多个磁盘，建议使用Manua手动方式。

![2021-02-24-13-08-01.png](../images/debian/2021-02-24-13-08-01.png)

下图列出了所有识别到的硬件。请一定注意不要选错了。

一般情况下，简单的分辨方法是看硬盘的大小，我这里使用的虚拟机，所以只有一个硬盘，真机安装时至少会有两个硬盘，一个是电脑硬盘，另一个是我们用制作好的启动U盘。通常可以根据硬盘大小就可以判定哪个是电脑硬盘，使用哪个硬盘安装Debian就选择哪个。

![2021-02-24-13-08-06.png](../images/debian/2021-02-24-13-08-06.png)

### 14.2. 设置分区

以下三种都可以用，新手建议选第一个。即使用一个分区。我这里选择了第三种，第二种与第三种操作类似。

![2021-02-24-13-08-16.png](../images/debian/2021-02-24-13-08-16.png)

我没有再调整，直接使用系统推荐的分区大小，这里对这几个分区作简单介绍：

- `/` 根目录，除以下分区外的目录都在根目录
- `/var` 动态数据，一些与用户相关的应用会把配置放在这个目录，本人在这个目录下只查看过日志
- `swap` 交换分区，相当于windows的虚拟内存
- `/tmp` 临时文件，一些应用下载的文件通常在这个目录，这个分区内的文件会被自动删除。所以这里我们通常不用来存放用户文件
- `/home` 用户文件均放在这个分区，类似windows上的`c:/Users/Administrator/.`+d盘+e盘+f盘

选中某个分区并回车，可以对该分区进行调整。比如我们可以把`/home`均出1,2个g的空间给`swap`使用。

分区调整完毕后选择`Finish partitioning and write changes to disk`并回车.在此操作之前，硬盘上的数据不会动，所以如果这个时候想起来硬盘上有数据没有备份，这个时候再退出安装重启电脑还不晚。

![2021-02-24-13-08-20.png](../images/debian/2021-02-24-13-08-20.png)

以下操作将真正修改分区，安装程序认为此操作较为危险，所以这个操作的默认设置为`No`

![2021-02-24-13-08-25.png](../images/debian/2021-02-24-13-08-25.png)

确认无误后选择`Yes`并回车继续

![2021-02-24-13-08-27.png](../images/debian/2021-02-24-13-08-27.png)

## 15. 扫描其它光盘

我们用的是一个U盘充当了安装光盘，只有一个盘，所以这里不需要扫描其它盘。直接回车进行下一步。

![2021-02-24-13-26-25.png](../images/debian/2021-02-24-13-26-25.png)

## 16. 选择镜像

这一步不要选错了，因为一旦选错，你的安装时间就不定了。选择一个合适的国内镜像，安装过程会快很多，因为在安装过程中安装程序会到软件仓库下载最新的软件包。即使如此，接下来的安装时间也会比较长。

### 16.1. 选择镜像国家

选China，不犹豫。

![2021-02-24-13-26-48.png](../images/debian/2021-02-24-13-26-48.png)

### 16.2. 选择镜像站点

这里列出了几个开源镜像站点，根据你当地的网络情况选择，我这里选择清华的开源镜像站。

![2021-02-24-13-27-00.png](../images/debian/2021-02-24-13-27-00.png)

## 17. 设置代理服务器

如果没有用到代理上网服务器，直接回车继续。

![2021-02-24-13-27-06.png](../images/debian/2021-02-24-13-27-06.png)

自动配置apt工具，该过程自动完成，不会出问题。

![2021-02-24-13-27-12.png](../images/debian/2021-02-24-13-27-12.png)

## 18. 参与调研

`Yes` 或 `No`均可，看个人心气。

![2021-02-24-13-29-33.png](../images/debian/2021-02-24-13-29-33.png)

## 19. 安装系统

### 19.1. 选择加装桌面和服务

服务我们是不需要的，这里全不选。桌面环境也可以随意，熟悉mac的推荐`gnome`，熟悉windows的推荐`Cinnamon`或`mate`。我这里将几个推荐的全装了，也多占用不了多少时间和存储。有兴趣可以变换下桌面感受一下。这种事情萝卜白菜，爱用哪个就用哪个吧。

在系统登录的时候可以切换使用的桌面。

![2021-02-24-13-30-14.png](../images/debian/2021-02-24-13-30-14.png)

### 19.2. 选择显示管理器

随便哪个都行，都可以用，就默认的吧：

![2021-02-24-14-52-08.png](../images/debian/2021-02-24-14-52-08.png)

### 19.3. 安装

这个过程需要下载应用并安装，需要的时间比较长（即使设置了国内镜像），安装时间主要与网速有关，与硬盘配置倒是关系不大。

![2021-02-24-14-52-25.png](../images/debian/2021-02-24-14-52-25.png)

## 20. 引导

如果是单系统，安装完毕会有如图提示：

![2021-02-26-10-01-48.png](../images/debian/2021-02-26-10-01-48.png)

选择`Yes`安装引导即可。如果是多系统，这里会有不同，但基本上使用这个引导也没问题，也可以正常启动`Windows`。并不用过分担心。

选择引导安装的磁盘。选择电脑上的硬盘，注意不要选错为U盘。通常如果本机只有一块硬盘的情况下，通常这里就是`/dev/sda`,U盘为`/dev/sdb`.如果本机有两块硬盘，U盘为`/dev/sdc`，以此类推。

![2021-02-26-10-02-23.png](../images/debian/2021-02-26-10-02-23.png)

## 21. 完成安装

安装完成后按提示重启电脑。注意在启动时拔掉U盘启动盘或调整启动顺序为电脑硬盘启动。

![2021-02-26-10-11-09.png](../images/debian/2021-02-26-10-11-09.png)

至此，Debian安装完成。

## 22. 初始化配置

### 22.1. 选择桌面

在系统启动完成后，会停留在登录界面，在登录之前，可以切换默认的桌面环境(Gnome),推荐(Gnome classic).

![2021-02-28-16-20-50.png](../images/debian/2021-02-28-16-20-50.png)

这里可以选择所有安装过的桌面。

然后输入之前设置的密码进行登录。

### 22.2. 为用户添加sudo权限

1. 打开终端

	具体方法为按下`windows`键，输入`terminal`搜索应用，或在桌面（有些桌面有）开始菜单在分类`Utilities`中找到`Terminal`工具。

1. 切换到root用户

	在终端输入命令：

	```bash
	su -
	```

	输入root用户密码并回车，输入密码时界面不会有变化，这是正常的。

1. 修改文件权限sudo

	```bash
	chmod +w /etc/sudoers
	```

1. 编辑sudo

	```bash
	vi /etc/sudoers
	```

	像下面这样添加一行，注意`feidao`为之前安装时设置的用户名。

	```bash
	root    ALL=(ALL)       ALL
	feidao  ALL=(ALL)       ALL
	```

1. 将文件属性改回来

	```bash
	chmod -w /etc/sudoers
	```

1. 退出root帐户

	`ctrl+d`退出`root`用户。

### 22.3. 安装必要的软件

```bash
sudo apt install -y vim curl wget git-all ssh chromium tilda zsh thunderbird
```

输入法推荐使用小企鹅输入法`Fcitx`

```bash
sudo apt install fcitx fcitx-table-all
```

重启之后正常就可以使用了，如果不可用，试试换个桌面。

#### 22.3.1. 其它常用的软件

- [Vscode](./202102281651)
- [Docker](./202102281652)
- [Git](./202102281653)
- [Nodejs](./202103011007)

### 22.4. 设置时区

因为之前系统安装时我没有能够设置正确时区，所以这里我使用命令再次设置时区。

```bash
tzselect
```

通过输入数字依次选`4) Asia`->`9) China`->`1) Beijing Time`.设置时区为东8区。
