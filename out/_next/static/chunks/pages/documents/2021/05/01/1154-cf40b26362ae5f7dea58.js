_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[135],{"K/bK":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var r=n("rePB"),o=n("Ff2n"),s=(n("q1tI"),n("7ljp")),c=n("3wrV");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a={};function u(t){var e=t.components,n=Object(o.a)(t,["components"]);return Object(s.a)("wrapper",p(p(p({},a),n),{},{components:e,mdxType:"MDXLayout"}),Object(s.a)("h1",null,"\u8de8\u57df\u8bf7\u6c42"),Object(s.a)(c.a,{lan:"ts",code:"\nimport { NextApiRequest, NextApiResponse } from 'next';\nimport nextConnect from 'next-connect';\nimport anylogger from 'anylogger';\n\nconst logger = anylogger('cros');\n\nexport default function cros<T>() {\n\treturn nextConnect<NextApiRequest, NextApiResponse<T>>()\n\t\t.use<NextApiRequest, NextApiResponse<T>>((req, res, next) => {\n\t\t\t// h5\u5e94\u7528\u9700\u8981\u8bbe\u7f6e\uff0c\u5c0f\u7a0b\u5e8f\u4e0d\u8fdb\u884coptions\u8bf7\u6c42\uff0c\u4e5f\u4e0d\u5b58\u5728\u8de8\u57df\u95ee\u9898\n\t\t\tconst acao = req.headers.origin;\n\t\t\tlogger.debug('method', req.method, 'headers', req.headers);\n\t\t\tif (acao) {\n\t\t\t\t// h5\u65f6\u6709\u503c\uff0c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8bf7\u6c42\u65f6origin\u4e3a\u7a7a\u503c\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', acao);\n\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'content-type, x-requested-with');\n\t\t\t\t// res.setHeader('Access-Control-Allow-Methods', 'PUT,POST,GET,DELETE,OPTIONS');\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'POST,GET');\n\t\t\t\tres.setHeader('Access-Control-Allow-Credentials', 'true');\n\t\t\t}\n\t\t\tnext();\n\t\t})\n\t\t.options((req, res) => {\n\t\t\tres.end();\n\t\t});\n}\n",mdxType:"CodeEditor"}))}u.isMDXComponent=!0},xc0E:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documents/2021/05/01/1154",function(){return n("K/bK")}])}},[["xc0E",0,1,2,3,4,5]]]);